<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Alfie | Your PTO Companion</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.1.3/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/5.11.3/main.min.css">
  <link rel="stylesheet" href="styles.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.1.3/js/bootstrap.bundle.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/5.11.3/main.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" defer></script>
  <script src="script.js" defer></script>
</head>
<body>
  <div class="container mt-5 text-center">
    <h1>Welcome to Alfie | Your PTO Companion</h1>
    <button class="btn btn-primary mt-4" id="startPlanningBtn">Start Planning</button>
  </div>

  <div id="ptoForm" class="container mt-4" style="display: none;">
    <div class="mb-3">
      <label for="yearSelect" class="form-label">Select Year:</label>
      <select id="yearSelect" class="form-select">
        <option value="2025">2025</option>
        <option value="2026">2026</option>
        <option value="2027">2027</option>
      </select>
    </div>
    <div class="mb-3">
      <label for="totalPTO" class="form-label">Total PTO Days Available:</label>
      <input type="number" id="totalPTO" class="form-control" min="0">
    </div>
    <div class="mb-3">
      <label for="ptoThisYear" class="form-label">Number of PTO Days to Take This Year:</label>
      <input type="number" id="ptoThisYear" class="form-control" min="0">
    </div>
    <div class="mb-3">
      <label for="preferredMonths" class="form-label">Preferred Months for Holidays:</label>
      <input type="text" id="preferredMonths" class="form-control" placeholder="e.g., January, March, July">
    </div>
    <button class="btn btn-success" id="submitFormBtn">Submit</button>
    <div class="loading-icon" style="display: none;">
      <p>Loading...</p>
    </div>
  </div>

  <div id="calendarContainer" class="container mt-5" style="display: none;">
    <div id="calendar"></div>
  </div>

  <div id="ptoSummary" class="container mt-4" style="display: none;">
    <h2>PTO Summary</h2>
    <p>Total PTO Days Available: <span id="totalPTOAvailable"></span></p>
    <p>PTO Days Requested: <span id="ptoRequested"></span></p>
    <p>PTO Days Scheduled: <span id="ptoScheduled"></span></p>
    <p>Remaining PTO Days: <span id="remainingPTO"></span></p>
    <button class="btn btn-secondary" id="exportPDF">Download Summary as PDF</button>
    <button class="btn btn-secondary" id="exportExcel">Download Summary as Excel</button>
  </div>

  <script>
    document.getElementById('startPlanningBtn').addEventListener('click', function() {
      document.getElementById('ptoForm').style.display = 'block';
    });

    document.getElementById('submitFormBtn').addEventListener('click', function() {
      const year = document.getElementById('yearSelect').value;
      const totalPTO = parseInt(document.getElementById('totalPTO').value);
      const ptoThisYear = parseInt(document.getElementById('ptoThisYear').value);
      const preferredMonths = document.getElementById('preferredMonths').value.split(',').map(m => m.trim());

      document.getElementById('ptoForm').style.display = 'none';
      document.getElementById('calendarContainer').style.display = 'block';
      document.getElementById('ptoSummary').style.display = 'block';

      initializeCalendar(year, preferredMonths);

      document.getElementById('totalPTOAvailable').textContent = totalPTO;
      document.getElementById('ptoRequested').textContent = ptoThisYear;
      document.getElementById('ptoScheduled').textContent = ptoThisYear;
      document.getElementById('remainingPTO').textContent = totalPTO - ptoThisYear;
    });

    function initializeCalendar(year, preferredMonths) {
      var calendarEl = document.getElementById('calendar');
      var calendar = new FullCalendar.Calendar(calendarEl, {
        initialView: 'dayGridMonth',
        initialDate: year + '-01-01',
        headerToolbar: {
          left: 'prev,next today',
          center: 'title',
          right: 'dayGridMonth,dayGridWeek'
        },
        events: [
          // Example to populate bank holidays, weekends, and PTO days dynamically
        ]
      });
      calendar.render();
    }
  </script>
</body>
</html>
